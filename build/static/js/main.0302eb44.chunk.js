(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(14),s=t.n(r),a=t(3),o=t(2),i=function(e){return function(n){e(n.target.value)}},u=function(e){var n=e.searchName,t=e.setSerachName;return Object(c.jsxs)("div",{children:["Filter shown with: ",Object(c.jsx)("input",{value:n,onChange:i(t)})]})},j=function(e){var n=e.message,t=e.error;return n?void 0!==t&&t?Object(c.jsx)("div",{className:"error",children:n}):Object(c.jsx)("div",{className:"message",children:n}):null},d=function(e){var n=e.handleSubmit,t=e.newName,r=e.setNewName,s=e.newNumber,a=e.setNewNumber;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:i(r)})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:s,onChange:i(a)})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},b=t(4),l=t.n(b),h="/api/persons",m=function(){return l.a.get(h).then((function(e){return e.data}))},O=function(e){return l.a.post(h,e).then((function(e){return e.data}))},f=function(e,n){return l.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){l.a.delete("".concat(h,"/").concat(e))},v=function(e){var n=e.persons,t=e.person,r=e.setPersons;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t.name}),Object(c.jsx)("td",{children:t.number}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){var e="Delete ".concat(t.name);window.confirm(e)&&(x(t.id),r(n.filter((function(e){return t.id!==e.id}))))},children:"Delete"})})]})},p=function(e){var n=e.persons,t=e.searchName,r=e.setPersons;return Object(c.jsx)("div",{children:Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:n.map((function(e){if(0===t.length||-1!==e.name.search(t))return Object(c.jsx)(v,{persons:n,person:e,setPersons:r},e.name)}))})})})},N=function(e){return Object(c.jsx)("h2",{children:e.name})},w=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],s=Object(o.useState)(""),i=Object(a.a)(s,2),b=i[0],l=i[1],h=Object(o.useState)(""),x=Object(a.a)(h,2),v=x[0],w=x[1],g=Object(o.useState)(""),S=Object(a.a)(g,2),k=S[0],y=S[1],P=Object(o.useState)(null),A=Object(a.a)(P,2),C=A[0],D=A[1],T=Object(o.useState)(null),E=Object(a.a)(T,2),I=E[0],J=E[1];Object(o.useEffect)((function(){m().then((function(e){return r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(N,{name:"Phonebook"}),I&&Object(c.jsx)(j,{message:I,error:!0}),C&&Object(c.jsx)(j,{message:C}),Object(c.jsx)("div",{children:Object(c.jsx)(u,{searchName:k,setSerachName:y})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(N,{name:"Add a new"}),Object(c.jsx)(d,{handleSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name})),c="".concat(b," is already added to phonebook, replace the old number with a new one?"),s={name:b,number:v};if(n.includes(b)&&window.confirm(c)){var a=t[n.indexOf(b)].id;f(a,s).then((function(e){return r(t.map((function(n){return a!==n.id?n:e})))})).catch((function(e){J("Information of ".concat(b," has already been removed from server")),setTimeout((function(){J(null)}),5e3)})),D("Added ".concat(b)),setTimeout((function(){D(null)}),3e3)}else O(s).then((function(e){return r(t.concat(s))})),l(""),D("Added ".concat(b)),setTimeout((function(){D(null)}),3e3)},newName:b,setNewName:l,newNumber:v,setNewNumber:w})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)(N,{name:"Numbers"}),Object(c.jsx)(p,{persons:t,searchName:k,setPersons:r})]})]})};t(37);s.a.render(Object(c.jsx)(w,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.0302eb44.chunk.js.map